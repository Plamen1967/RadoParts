@if (carView || partView || rimWithTyreView) {
    <div [ngClass]="{ card: true, highlighted: isHighlighted, showPart: showParts === true }" style="background-color: inherit; border: inherit; border-radius: 8px">
        <div class="d-flex flex-row part-row">
            <div class="data w-100">
                <div class="image-order image-style">
                    <app-imagecomponent [showImage]="mainPicture!" [displayMain]="true" class="image-component"></app-imagecomponent>
                </div>
                <div class="info-order w-100 mt-1 mb-1">
                    @if (partView) {
                        <app-rowpartdealer [part]="partView" (action)="actionPart($event)"></app-rowpartdealer>
                    } @else if (carView) {
                        <app-dealerviewcar [carView]="carView" [showParts]="showParts"></app-dealerviewcar>
                    } @else if (rimWithTyreView) {
                        <app-dealerviewtyre [item]="rimWithTyreView" (action)="actionPart($event)"></app-dealerviewtyre>
                    }
                </div>
            </div>
        </div>
        <div class="ms-3 mt-2 d-flex align-items-end mb-2 flex-wrap" style="margin-top: auto">
            <div class="d-flex justify-content-start gap-2 align-items-end me-2">
                @if (allowUpdate) {
                    <button class="btn btn-primary mr-1 mt-1 btn-sm" data-cy="deleteCar" (click)="updateItem(id)">{{ labels.UPDATE }}</button>
                    <button class="btn btn-primary mr-1 mt-1 btn-sm" data-cy="updateCar" (click)="deleteItem(id)">{{ labels.DELETE }}</button>
                }
            </div>
            <div class="d-flex justify-content-start gap-2 align-items-end">
                @if (allowUpdate && seller && carView) {
                    <button class="btn btn-primary mr-1 mt-1 btn-sm" data-cy="addPart" (click)="addPart(id)">{{ labels.ADD }} {{ labels.PART }}</button>
                }
                @if (carView && carView.countParts) {
                    <button class="btn btn-primary mr-1 mt-1 btn-sm" data-cy="showParts" (click)="displayParts(carView.carId!)">{{ label() }}</button>
                }
            </div>
        </div>
        @if (parts && this.showParts) {
            <div class="part-card">
                <div class="d-inline-flex justify-content-center w-100" style="position: relative">
                    <div class="title">Части</div>
                    <div
                        class="part-close-arrow"
                        role="none"
                        (click)="showParts = false">
                        <span class="material-symbols-outlined"> keyboard_arrow_up </span>
                    </div>
                </div>
                <div class="parts">
                    @for (part of parts; track part.partId) {
                        <div class="car_part">
                            <app-dealerview [showPart]="true" [partView]="part" [allowUpdate]="true" (action)="actionPart($event)"> </app-dealerview>
                        </div>
                    }
                </div>
            </div>
        }
    </div>
}
